<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dutient HR Management System</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Archivo:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #0F172A;
            --primary-light: #1E293B;
            --accent: #F59E0B;
            --accent-hover: #D97706;
            --success: #10B981;
            --danger: #EF4444;
            --warning: #F59E0B;
            --info: #3B82F6;
            --bg: #F8FAFC;
            --bg-card: #FFFFFF;
            --text: #0F172A;
            --text-muted: #64748B;
            --border: #E2E8F0;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: var(--primary);
            color: white;
            padding: 1.5rem 0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: 'Archivo', sans-serif;
            font-size: 1.75rem;
            font-weight: 800;
            letter-spacing: -0.5px;
        }

        .logo span {
            color: var(--accent);
        }

        nav ul {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            cursor: pointer;
        }

        nav a:hover, nav a.active {
            color: var(--accent);
        }

        /* Main Content */
        main {
            padding: 2rem 0;
            min-height: calc(100vh - 200px);
        }

        .page-header {
            margin-bottom: 2rem;
        }

        .page-title {
            font-family: 'Archivo', sans-serif;
            font-size: 2.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .page-subtitle {
            color: var(--text-muted);
            font-size: 1.1rem;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border);
        }

        .card-title {
            font-family: 'Archivo', sans-serif;
            font-size: 1.5rem;
            font-weight: 600;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 200px;
            height: 200px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .stat-value {
            font-family: 'Archivo', sans-serif;
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.25rem;
        }

        .stat-label {
            font-size: 0.95rem;
            opacity: 0.9;
        }

        .stat-trend {
            margin-top: 0.5rem;
            font-size: 0.85rem;
            opacity: 0.8;
        }

        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
        }

        .btn-secondary {
            background: var(--primary);
            color: white;
        }

        .btn-secondary:hover {
            background: var(--primary-light);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
        }

        /* Forms */
        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text);
        }

        input, select, textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 0.95rem;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--accent);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: var(--bg);
        }

        th {
            text-align: left;
            padding: 1rem;
            font-weight: 600;
            font-family: 'Archivo', sans-serif;
            border-bottom: 2px solid var(--border);
        }

        td {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
        }

        tr:hover {
            background: var(--bg);
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 0.35rem 0.75rem;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .badge-new { background: #DBEAFE; color: #1E40AF; }
        .badge-screening { background: #FEF3C7; color: #92400E; }
        .badge-interview { background: #E0E7FF; color: #3730A3; }
        .badge-final { background: #FCE7F3; color: #831843; }
        .badge-selected { background: #D1FAE5; color: #065F46; }
        .badge-rejected { background: #FEE2E2; color: #991B1B; }
        .badge-ready { background: #D1FAE5; color: #065F46; }
        .badge-linkedin { background: #0077B5; color: white; }
        .badge-naukri { background: #FF6B6B; color: white; }
        .badge-referral { background: #10B981; color: white; }
        .badge-career { background: #8B5CF6; color: white; }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-title {
            font-family: 'Archivo', sans-serif;
            font-size: 1.75rem;
            font-weight: 700;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-muted);
            padding: 0.25rem;
            line-height: 1;
        }

        .close-modal:hover {
            color: var(--danger);
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 0.5rem;
            border-bottom: 2px solid var(--border);
            margin-bottom: 2rem;
        }

        .tab {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-muted);
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            font-size: 0.95rem;
        }

        .tab.active {
            color: var(--accent);
            border-bottom-color: var(--accent);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Candidate Card */
        .candidate-card {
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            transition: all 0.3s;
            cursor: pointer;
        }

        .candidate-card:hover {
            border-color: var(--accent);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .candidate-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }

        .candidate-name {
            font-family: 'Archivo', sans-serif;
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .candidate-role {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .candidate-meta {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 0.75rem;
        }

        .candidate-meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        /* Rating */
        .rating {
            display: flex;
            gap: 0.25rem;
        }

        .star {
            color: #D1D5DB;
            font-size: 1.25rem;
        }

        .star.filled {
            color: var(--accent);
        }

        /* Interview Stage Timeline */
        .timeline {
            position: relative;
            padding-left: 2rem;
        }

        .timeline-item {
            position: relative;
            padding-bottom: 2rem;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -1.65rem;
            top: 0.5rem;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--border);
        }

        .timeline-item.completed::before {
            background: var(--success);
        }

        .timeline-item.current::before {
            background: var(--accent);
            box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.2);
        }

        .timeline-item::after {
            content: '';
            position: absolute;
            left: -1.59rem;
            top: 1.25rem;
            width: 2px;
            height: calc(100% - 1rem);
            background: var(--border);
        }

        .timeline-item:last-child::after {
            display: none;
        }

        .timeline-content {
            background: var(--bg);
            padding: 1rem;
            border-radius: 8px;
        }

        /* Filters */
        .filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        /* Search */
        .search-box {
            position: relative;
            flex: 2;
        }

        .search-box input {
            padding-left: 2.5rem;
        }

        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }

        /* Hide pages by default */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Utility Classes */
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .flex { display: flex; }
        .flex-between { display: flex; justify-content: space-between; align-items: center; }
        .gap-1 { gap: 0.5rem; }
        .gap-2 { gap: 1rem; }

        /* Upload Zone */
        .upload-zone {
            border: 3px dashed var(--border);
            border-radius: 12px;
            padding: 3rem;
            text-align: center;
            background: var(--bg);
            transition: all 0.3s;
            cursor: pointer;
        }

        .upload-zone:hover, .upload-zone.dragover {
            border-color: var(--accent);
            background: rgba(245, 158, 11, 0.05);
        }

        .upload-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .upload-text {
            font-size: 1.1rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .upload-subtext {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        /* File List */
        .file-list {
            margin-top: 2rem;
        }

        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-bottom: 0.75rem;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
        }

        .file-icon {
            font-size: 2rem;
        }

        .file-details {
            flex: 1;
        }

        .file-name {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .file-meta {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .file-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .file-actions {
            display: flex;
            gap: 0.5rem;
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent);
            transition: width 0.3s;
        }

        /* AI Search Box */
        .ai-search-box {
            background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
            padding: 2rem;
            border-radius: 12px;
            color: white;
            margin-bottom: 2rem;
        }

        .ai-search-box h3 {
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .ai-search-input {
            display: flex;
            gap: 1rem;
        }

        .ai-search-input input {
            flex: 1;
            border: none;
            padding: 1rem;
            border-radius: 8px;
            font-size: 1rem;
        }

        .ai-search-input button {
            background: white;
            color: #667EEA;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .ai-search-input button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .ai-example {
            margin-top: 1rem;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Match Score */
        .match-score {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
            border-radius: 20px;
            font-weight: 600;
        }

        .match-score.high { background: linear-gradient(135deg, #10B981 0%, #059669 100%); }
        .match-score.medium { background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%); }
        .match-score.low { background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%); }

        /* Interview Timeline */
        .interview-timeline {
            position: relative;
            padding: 2rem;
            background: var(--bg);
            border-radius: 12px;
        }

        .timeline-header {
            font-family: 'Archivo', sans-serif;
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 2rem;
        }

        /* Google Meet Integration */
        .meet-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: #4285F4;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .meet-button:hover {
            background: #357AE8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(66, 133, 244, 0.4);
        }

        .meet-button::before {
            content: 'üìπ';
            font-size: 1.2rem;
        }

        /* Email Communication Log */
        .email-log {
            background: var(--bg);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .email-log-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 0.75rem;
        }

        .email-type {
            font-weight: 600;
            color: var(--primary);
        }

        .email-timestamp {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .email-status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .email-status.sent { background: #D1FAE5; color: #065F46; }
        .email-status.opened { background: #DBEAFE; color: #1E40AF; }
        .email-status.replied { background: #FCE7F3; color: #831843; }
        .email-status.bounced { background: #FEE2E2; color: #991B1B; }

        .email-preview {
            font-size: 0.9rem;
            color: var(--text-muted);
            line-height: 1.6;
            margin-top: 0.5rem;
        }

        /* JD Upload */
        .jd-upload {
            background: var(--bg);
            border: 2px dashed var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 1rem;
        }

        .jd-upload:hover {
            border-color: var(--accent);
            background: rgba(245, 158, 11, 0.05);
        }

        .jd-uploaded {
            background: #D1FAE5;
            border-color: #10B981;
            padding: 1rem;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        /* Screening Results */
        .screening-card {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s;
        }

        .screening-card:hover {
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
            border-color: var(--accent);
        }

        .screening-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }

        .screening-name {
            font-family: 'Archivo', sans-serif;
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .screening-skills {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .skill-tag {
            padding: 0.35rem 0.75rem;
            background: var(--bg);
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .skill-tag.matched {
            background: #D1FAE5;
            color: #065F46;
            border: 1px solid #10B981;
        }

        /* Email Templates Preview */
        .email-preview {
            background: #F9FAFB;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .email-preview-header {
            font-weight: 600;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
        }

        /* Responsive */
        @media (max-width: 768px) {
            nav ul {
                flex-direction: column;
                gap: 1rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .filters {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">Dutient<span>HRS</span></div>
                <nav>
                    <ul>
                        <li><a href="#" data-page="dashboard" class="nav-link active">Dashboard</a></li>
                        <li><a href="#" data-page="candidates" class="nav-link">Candidates</a></li>
                        <li><a href="#" data-page="talent-pool" class="nav-link">Talent Pool</a></li>
                        <li><a href="#" data-page="interviews" class="nav-link">Interviews</a></li>
                        <li><a href="#" data-page="bulk-upload" class="nav-link">Bulk Upload</a></li>
                        <li><a href="#" data-page="templates" class="nav-link">Templates</a></li>
                        <li><a href="#" data-page="analytics" class="nav-link">Analytics</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Dashboard Page -->
        <div id="dashboard" class="page active">
            <div class="page-header">
                <h1 class="page-title">Dashboard</h1>
                <p class="page-subtitle">Overview of your hiring pipeline and key metrics</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">23</div>
                    <div class="stat-label">Active Candidates</div>
                    <div class="stat-trend">‚Üë 12% from last week</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">8</div>
                    <div class="stat-label">Ready to Deploy</div>
                    <div class="stat-trend">Target: 6 minimum</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">5</div>
                    <div class="stat-label">Interviews Today</div>
                    <div class="stat-trend">2 pending feedback</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">87%</div>
                    <div class="stat-label">Selection Rate</div>
                    <div class="stat-trend">‚Üë 5% improvement</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Pipeline Overview</h2>
                    <button class="btn btn-primary btn-sm" onclick="showModal('addCandidateModal')">+ Add Candidate</button>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Stage</th>
                                <th>Count</th>
                                <th>Avg. Time</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="badge badge-new">New Applications</span></td>
                                <td>8</td>
                                <td>1.2 days</td>
                                <td><button class="btn btn-secondary btn-sm" onclick="filterCandidates('New')">View</button></td>
                            </tr>
                            <tr>
                                <td><span class="badge badge-screening">Screening</span></td>
                                <td>5</td>
                                <td>2.5 days</td>
                                <td><button class="btn btn-secondary btn-sm" onclick="filterCandidates('Screening')">View</button></td>
                            </tr>
                            <tr>
                                <td><span class="badge badge-interview">Interview</span></td>
                                <td>6</td>
                                <td>3.8 days</td>
                                <td><button class="btn btn-secondary btn-sm" onclick="filterCandidates('Interview')">View</button></td>
                            </tr>
                            <tr>
                                <td><span class="badge badge-final">Final Round</span></td>
                                <td>4</td>
                                <td>2.1 days</td>
                                <td><button class="btn btn-secondary btn-sm" onclick="filterCandidates('Final Round')">View</button></td>
                            </tr>
                            <tr>
                                <td><span class="badge badge-selected">Selected</span></td>
                                <td>8</td>
                                <td>-</td>
                                <td><button class="btn btn-secondary btn-sm" onclick="navigateTo('talent-pool')">View Pool</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Recent Activity</h2>
                </div>
                <div class="timeline">
                    <div class="timeline-item completed">
                        <div class="timeline-content">
                            <strong>Interview Completed</strong> - Sarah Johnson (Senior Developer)
                            <div class="candidate-meta">
                                <span class="candidate-meta-item">‚≠ê 4.5/5 Rating</span>
                                <span class="candidate-meta-item">üïê 2 hours ago</span>
                            </div>
                        </div>
                    </div>
                    <div class="timeline-item current">
                        <div class="timeline-content">
                            <strong>Awaiting Final Round</strong> - Raj Kumar (DevOps Engineer)
                            <div class="candidate-meta">
                                <span class="candidate-meta-item">üë§ Krishna/Rohit required</span>
                                <span class="candidate-meta-item">üïê 5 hours ago</span>
                            </div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <strong>New Application</strong> - Priya Sharma (UI/UX Designer)
                            <div class="candidate-meta">
                                <span class="badge badge-linkedin">LinkedIn</span>
                                <span class="candidate-meta-item">üïê 1 day ago</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Candidates Page -->
        <div id="candidates" class="page">
            <div class="page-header flex-between">
                <div>
                    <h1 class="page-title">All Candidates</h1>
                    <p class="page-subtitle">Manage and track all candidate applications</p>
                </div>
                <button class="btn btn-primary" onclick="showModal('addCandidateModal')">+ Add Candidate</button>
            </div>

            <!-- AI-Powered Search -->
            <div class="ai-search-box">
                <h3>ü§ñ AI-Powered Resume Search</h3>
                <p style="margin-bottom: 1rem; opacity: 0.95;">Search resumes using natural language or upload a Job Description</p>
                <div class="ai-search-input">
                    <input type="text" id="aiSearchInput" placeholder="e.g., 'Find senior developers with 5+ years in React and Node.js who have worked in fintech'" style="color: var(--text);">
                    <button onclick="performAISearch()">üîç AI Search</button>
                </div>
                <div class="ai-example">
                    <strong>Examples:</strong> "Python developers with ML experience" ‚Ä¢ "UI/UX designers from top companies" ‚Ä¢ "DevOps engineers who know Kubernetes"
                </div>
                <div class="mt-2">
                    <div class="jd-upload" id="jdUploadZone" onclick="document.getElementById('jdFileInput').click()">
                        <input type="file" id="jdFileInput" accept=".pdf,.docx,.txt" style="display: none;" onchange="handleJDUpload(event)">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">üìÑ</div>
                        <div><strong>Upload Job Description</strong></div>
                        <div style="font-size: 0.85rem; margin-top: 0.25rem; opacity: 0.8;">AI will match candidates to your JD (PDF, DOCX, TXT)</div>
                    </div>
                    <div id="jdUploadedInfo" style="display: none;" class="jd-uploaded">
                        <div>
                            <strong id="jdFileName"></strong>
                            <div style="font-size: 0.85rem; color: #065F46; margin-top: 0.25rem;">‚úì JD analyzed - showing matched candidates</div>
                        </div>
                        <button class="btn btn-sm btn-danger" onclick="clearJD()">Remove</button>
                    </div>
                </div>
            </div>

            <div class="filters">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="candidateSearch" placeholder="Search by name, role, or skills..." oninput="searchCandidates()">
                </div>
                <div class="filter-group">
                    <select id="statusFilter" onchange="filterCandidates()">
                        <option value="">All Stages</option>
                        <option value="New">New Application</option>
                        <option value="Screening">Screening</option>
                        <option value="Interview">Interview</option>
                        <option value="Final Round">Final Round</option>
                        <option value="Selected">Selected</option>
                        <option value="Rejected">Rejected</option>
                    </select>
                </div>
                <div class="filter-group">
                    <select id="sourceFilter" onchange="filterCandidates()">
                        <option value="">All Sources</option>
                        <option value="LinkedIn">LinkedIn</option>
                        <option value="Naukri">Naukri</option>
                        <option value="Career Page">Career Page</option>
                        <option value="Referral">Referral</option>
                    </select>
                </div>
                <div class="filter-group">
                    <select id="roleFilter" onchange="filterCandidates()">
                        <option value="">All Roles</option>
                        <option value="Developer">Developer</option>
                        <option value="Designer">Designer</option>
                        <option value="DevOps">DevOps</option>
                        <option value="Manager">Manager</option>
                    </select>
                </div>
            </div>

            <div id="candidatesList">
                <!-- Candidates will be dynamically loaded here -->
            </div>
        </div>

        <!-- Talent Pool Page -->
        <div id="talent-pool" class="page">
            <div class="page-header flex-between">
                <div>
                    <h1 class="page-title">Ready-to-Deploy Talent Pool</h1>
                    <p class="page-subtitle">Pre-vetted candidates available for immediate hiring</p>
                </div>
                <div>
                    <span class="stat-value" style="font-size: 2rem; color: var(--success);">8/6</span>
                    <span class="stat-label" style="color: var(--text-muted);">Ready candidates (Target: 6)</span>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Available Talent</h2>
                </div>
                <div id="talentPoolList">
                    <!-- Talent pool candidates will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Interviews Page -->
        <div id="interviews" class="page">
            <div class="page-header">
                <h1 class="page-title">Interview Management</h1>
                <p class="page-subtitle">Schedule interviews and capture structured feedback</p>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="switchTab('scheduled')">Scheduled</button>
                <button class="tab" onclick="switchTab('pending-feedback')">Pending Feedback</button>
                <button class="tab" onclick="switchTab('completed')">Completed</button>
            </div>

            <div id="scheduled" class="tab-content active">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Upcoming Interviews</h2>
                        <button class="btn btn-primary btn-sm" onclick="showModal('scheduleInterviewModal')">+ Schedule Interview</button>
                    </div>
                    <div id="scheduledInterviews">
                        <!-- Scheduled interviews will be loaded here -->
                    </div>
                </div>
            </div>

            <div id="pending-feedback" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Awaiting Feedback</h2>
                    </div>
                    <div id="pendingFeedbackList">
                        <!-- Pending feedback interviews will be loaded here -->
                    </div>
                </div>
            </div>

            <div id="completed" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Completed Interviews</h2>
                    </div>
                    <div id="completedInterviews">
                        <!-- Completed interviews will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Bulk Upload Page -->
        <div id="bulk-upload" class="page">
            <div class="page-header">
                <h1 class="page-title">Bulk Resume Upload & AI Screening</h1>
                <p class="page-subtitle">Upload multiple resumes and let AI screen candidates automatically</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Upload Resumes</h2>
                    <div class="flex gap-2">
                        <button class="btn btn-secondary btn-sm" onclick="document.getElementById('bulkResumeInput').click()">üìÅ Browse Files</button>
                        <button class="btn btn-primary btn-sm" onclick="startBulkScreening()" id="startScreeningBtn" style="display: none;">ü§ñ Start AI Screening</button>
                    </div>
                </div>
                
                <div class="upload-zone" id="uploadZone" onclick="document.getElementById('bulkResumeInput').click()">
                    <div class="upload-icon">üì§</div>
                    <div class="upload-text">Drop PDF or DOCX resumes here</div>
                    <div class="upload-subtext">or click to browse (supports multiple files)</div>
                    <input type="file" id="bulkResumeInput" multiple accept=".pdf,.docx,.doc" style="display: none;" onchange="handleBulkUpload(event)">
                </div>

                <div class="file-list" id="uploadedFilesList" style="display: none;">
                    <h3 style="margin-bottom: 1rem;">Uploaded Files (<span id="fileCount">0</span>)</h3>
                    <div id="fileItems"></div>
                </div>
            </div>

            <div class="card" id="screeningOptionsCard" style="display: none;">
                <div class="card-header">
                    <h2 class="card-title">Screening Criteria (Optional)</h2>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Role Type</label>
                        <select id="bulkScreeningRole">
                            <option value="">Any Role</option>
                            <option>Senior Developer</option>
                            <option>UI/UX Designer</option>
                            <option>DevOps Engineer</option>
                            <option>Project Manager</option>
                            <option>QA Engineer</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Minimum Experience (years)</label>
                        <input type="number" id="bulkMinExperience" min="0" max="30" value="0">
                    </div>
                    <div class="form-group">
                        <label>Required Skills (comma-separated)</label>
                        <input type="text" id="bulkRequiredSkills" placeholder="e.g., JavaScript, React, Node.js">
                    </div>
                </div>
                <div class="form-group">
                    <label>Job Description</label>
                    <textarea id="bulkJD" rows="4" placeholder="Paste job description here for better AI matching..."></textarea>
                </div>
            </div>

            <div class="card" id="screeningResultsCard" style="display: none;">
                <div class="card-header">
                    <h2 class="card-title">Screening Results</h2>
                    <div class="flex gap-2">
                        <button class="btn btn-success btn-sm" onclick="approveAllShortlisted()">‚úì Approve All Shortlisted</button>
                        <button class="btn btn-secondary btn-sm" onclick="exportScreeningResults()">üì• Export Results</button>
                    </div>
                </div>
                <div id="screeningResults"></div>
            </div>
        </div>

        <!-- Templates Page -->
        <div id="templates" class="page">
            <div class="page-header">
                <h1 class="page-title">Email Templates</h1>
                <p class="page-subtitle">Standardized communication templates for hiring workflow</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Template Library</h2>
                    <button class="btn btn-primary btn-sm" onclick="showModal('createTemplateModal')">+ Create Template</button>
                </div>

                <div class="form-row mb-2">
                    <div>
                        <label>Template Type</label>
                        <select id="templateType" onchange="loadTemplate()">
                            <option value="rejection">Rejection Email</option>
                            <option value="selection">Selection & Offer</option>
                            <option value="interview-invite">Interview Invitation</option>
                            <option value="status-update">Status Update</option>
                            <option value="final-round">Final Round Invitation</option>
                        </select>
                    </div>
                </div>

                <div class="email-preview" id="templatePreview">
                    <!-- Template preview will be loaded here -->
                </div>

                <div class="mt-2">
                    <button class="btn btn-secondary" onclick="editTemplate()">Edit Template</button>
                    <button class="btn btn-primary" onclick="useTemplate()">Use Template</button>
                </div>
            </div>
        </div>

        <!-- Analytics Page -->
        <div id="analytics" class="page">
            <div class="page-header">
                <h1 class="page-title">Analytics & Reports</h1>
                <p class="page-subtitle">Insights into your hiring process performance</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">15.2</div>
                    <div class="stat-label">Days Avg. Time to Hire</div>
                    <div class="stat-trend">‚Üì 3 days from last month</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">42%</div>
                    <div class="stat-label">Offer Acceptance Rate</div>
                    <div class="stat-trend">‚Üë 8% improvement</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">156</div>
                    <div class="stat-label">Total Applications</div>
                    <div class="stat-trend">This quarter</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">4.2</div>
                    <div class="stat-label">Avg. Interview Rating</div>
                    <div class="stat-trend">Out of 5</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Source Performance</h2>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Source</th>
                            <th>Applications</th>
                            <th>Interviews</th>
                            <th>Hired</th>
                            <th>Conversion Rate</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="badge badge-linkedin">LinkedIn</span></td>
                            <td>68</td>
                            <td>24</td>
                            <td>8</td>
                            <td>11.8%</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-naukri">Naukri</span></td>
                            <td>52</td>
                            <td>18</td>
                            <td>5</td>
                            <td>9.6%</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-career">Career Page</span></td>
                            <td>24</td>
                            <td>12</td>
                            <td>6</td>
                            <td>25%</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-referral">Referral</span></td>
                            <td>12</td>
                            <td>10</td>
                            <td>7</td>
                            <td>58.3%</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Role-wise Pipeline</h2>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Role</th>
                            <th>Active</th>
                            <th>In Pool</th>
                            <th>Avg. Rating</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Senior Developer</td>
                            <td>8</td>
                            <td>3</td>
                            <td>4.3/5</td>
                        </tr>
                        <tr>
                            <td>UI/UX Designer</td>
                            <td>5</td>
                            <td>2</td>
                            <td>4.5/5</td>
                        </tr>
                        <tr>
                            <td>DevOps Engineer</td>
                            <td>4</td>
                            <td>1</td>
                            <td>4.1/5</td>
                        </tr>
                        <tr>
                            <td>Project Manager</td>
                            <td>6</td>
                            <td>2</td>
                            <td>4.4/5</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <!-- Add Candidate Modal -->
    <div id="addCandidateModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add New Candidate</h2>
                <button class="close-modal" onclick="closeModal('addCandidateModal')">√ó</button>
            </div>
            <form id="addCandidateForm" onsubmit="addCandidate(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label>Full Name *</label>
                        <input type="text" required>
                    </div>
                    <div class="form-group">
                        <label>Email *</label>
                        <input type="email" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel">
                    </div>
                    <div class="form-group">
                        <label>Role Applied For *</label>
                        <select required>
                            <option value="">Select Role</option>
                            <option>Senior Developer</option>
                            <option>UI/UX Designer</option>
                            <option>DevOps Engineer</option>
                            <option>Project Manager</option>
                            <option>QA Engineer</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Source *</label>
                        <select required>
                            <option value="">Select Source</option>
                            <option>LinkedIn</option>
                            <option>Naukri</option>
                            <option>Career Page</option>
                            <option>Referral</option>
                            <option>Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Experience (years)</label>
                        <input type="number" min="0" max="30">
                    </div>
                </div>
                <div class="form-group">
                    <label>Skills</label>
                    <input type="text" placeholder="e.g., JavaScript, React, Node.js (comma separated)">
                </div>
                <div class="form-group">
                    <label>Resume/CV Link</label>
                    <input type="url" placeholder="https://">
                </div>
                <div class="form-group">
                    <label>Notes</label>
                    <textarea placeholder="Additional information about the candidate..."></textarea>
                </div>
                <div class="flex gap-2">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addCandidateModal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Candidate</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Interview Feedback Modal -->
    <div id="feedbackModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Interview Feedback</h2>
                <button class="close-modal" onclick="closeModal('feedbackModal')">√ó</button>
            </div>
            <form id="feedbackForm" onsubmit="submitFeedback(event)">
                <div class="form-group">
                    <label>Candidate Name</label>
                    <input type="text" id="feedbackCandidateName" readonly>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Interview Round *</label>
                        <select required>
                            <option>Initial Screening</option>
                            <option>Technical Round 1</option>
                            <option>Technical Round 2</option>
                            <option>Manager Round</option>
                            <option>Final Round (Krishna/Rohit)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Interviewer *</label>
                        <input type="text" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Overall Rating *</label>
                        <select required>
                            <option value="">Select Rating</option>
                            <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Exceptional</option>
                            <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê Strong</option>
                            <option value="3">‚≠ê‚≠ê‚≠ê Good</option>
                            <option value="2">‚≠ê‚≠ê Average</option>
                            <option value="1">‚≠ê Below Expectations</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Recommendation *</label>
                        <select required>
                            <option value="">Select</option>
                            <option>Strong Yes - Move Forward</option>
                            <option>Yes - Move Forward</option>
                            <option>Maybe - Need More Info</option>
                            <option>No - Reject</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Technical Skills Assessment</label>
                    <textarea placeholder="Evaluate technical competencies, problem-solving abilities..." rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>Communication & Cultural Fit</label>
                    <textarea placeholder="Assess communication skills, team compatibility, cultural alignment..." rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>Strengths</label>
                    <textarea placeholder="What did the candidate excel at?" rows="2"></textarea>
                </div>
                <div class="form-group">
                    <label>Areas of Concern</label>
                    <textarea placeholder="Any concerns or red flags?" rows="2"></textarea>
                </div>
                <div class="form-group">
                    <label>Additional Comments</label>
                    <textarea placeholder="Any other observations or notes..." rows="2"></textarea>
                </div>
                <div class="flex gap-2">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('feedbackModal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Submit Feedback</button>
                </div>
            </form>
        </div>
    </div>

    <!-- View Candidate Modal -->
    <div id="viewCandidateModal" class="modal">
        <div class="modal-content" style="max-width: 1000px;">
            <div class="modal-header">
                <h2 class="modal-title" id="viewCandidateName">Candidate Details</h2>
                <button class="close-modal" onclick="closeModal('viewCandidateModal')">√ó</button>
            </div>
            
            <div class="tabs">
                <button class="tab active" onclick="switchCandidateTab('details')">Profile</button>
                <button class="tab" onclick="switchCandidateTab('timeline')">Interview Timeline</button>
                <button class="tab" onclick="switchCandidateTab('emails')">Email Communication</button>
            </div>

            <div id="candidate-details-tab" class="tab-content active">
                <div id="candidateDetailsContent"></div>
            </div>

            <div id="candidate-timeline-tab" class="tab-content">
                <div class="interview-timeline">
                    <div class="timeline-header">Interview Journey</div>
                    <div class="timeline" id="candidateTimelineContent">
                        <!-- Timeline will be loaded here -->
                    </div>
                </div>
            </div>

            <div id="candidate-emails-tab" class="tab-content">
                <div class="flex-between mb-2">
                    <h3>Email Communication History</h3>
                    <button class="btn btn-primary btn-sm" onclick="showModal('sendEmailModal')">‚úâÔ∏è Send Email</button>
                </div>
                <div id="candidateEmailsContent">
                    <!-- Email history will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Send Email Modal -->
    <div id="sendEmailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Send Email to Candidate</h2>
                <button class="close-modal" onclick="closeModal('sendEmailModal')">√ó</button>
            </div>
            <form id="sendEmailForm" onsubmit="sendCandidateEmail(event)">
                <div class="form-group">
                    <label>Email Type *</label>
                    <select id="emailType" required onchange="loadEmailTemplate()">
                        <option value="">Select Type</option>
                        <option value="interview-invite">Interview Invitation</option>
                        <option value="status-update">Status Update</option>
                        <option value="final-round">Final Round Invitation</option>
                        <option value="selection">Selection & Offer</option>
                        <option value="rejection">Rejection</option>
                        <option value="custom">Custom Email</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>To</label>
                    <input type="email" id="emailTo" readonly>
                </div>
                <div class="form-group">
                    <label>Subject *</label>
                    <input type="text" id="emailSubject" required>
                </div>
                <div class="form-group">
                    <label>Message *</label>
                    <textarea id="emailBody" rows="10" required></textarea>
                </div>
                <div class="form-group" id="meetLinkGroup" style="display: none;">
                    <label>Google Meet Link</label>
                    <div class="flex gap-2">
                        <input type="url" id="meetLink" placeholder="https://meet.google.com/xxx-xxxx-xxx">
                        <button type="button" class="meet-button" onclick="generateMeetLink()">Generate Meet Link</button>
                    </div>
                </div>
                <div class="form-group" style="background: #FEF3C7; padding: 1rem; border-radius: 8px; border-left: 4px solid #F59E0B;">
                    <strong>üìß Email Tracking Enabled</strong>
                    <div style="font-size: 0.9rem; margin-top: 0.5rem; color: #92400E;">
                        This email will be tracked for opens and responses. You'll see the status in the communication history.
                    </div>
                </div>
                <div class="flex gap-2 mt-2">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('sendEmailModal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">üì§ Send Email</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Sample Data
        let candidates = [
            {
                id: 1,
                name: "Sarah Johnson",
                email: "sarah.j@email.com",
                phone: "+91 98765 43210",
                role: "Senior Developer",
                source: "LinkedIn",
                status: "Interview",
                experience: 5,
                skills: ["JavaScript", "React", "Node.js", "MongoDB"],
                rating: 4.5,
                appliedDate: "2025-02-01",
                notes: "Strong technical background, excellent problem-solving skills",
                timeline: [
                    { stage: "Application Received", date: "2025-02-01", status: "completed", notes: "Applied via LinkedIn" },
                    { stage: "Initial Screening", date: "2025-02-02", status: "completed", notes: "Phone screening completed - strong candidate", interviewer: "Priya Joshi" },
                    { stage: "Technical Round 1", date: "2025-02-04", status: "completed", notes: "Excellent coding skills, solved problems efficiently", interviewer: "Rahul Mehta", rating: 4.5, meetLink: "https://meet.google.com/abc-defg-hij" },
                    { stage: "Technical Round 2", date: "2025-02-06", status: "current", notes: "Scheduled for system design discussion", interviewer: "Amit Verma", meetLink: "https://meet.google.com/xyz-abcd-efg" }
                ],
                emails: [
                    { type: "Interview Invitation", subject: "Interview Invitation - Senior Developer", sentDate: "2025-02-03", status: "opened", openedDate: "2025-02-03" },
                    { type: "Status Update", subject: "Update on your application", sentDate: "2025-02-05", status: "replied", repliedDate: "2025-02-05" }
                ]
            },
            {
                id: 2,
                name: "Raj Kumar",
                email: "raj.k@email.com",
                phone: "+91 98765 43211",
                role: "DevOps Engineer",
                source: "Naukri",
                status: "Final Round",
                experience: 7,
                skills: ["AWS", "Docker", "Kubernetes", "Jenkins"],
                rating: 4.3,
                appliedDate: "2025-01-28",
                notes: "Extensive cloud experience, good cultural fit",
                timeline: [
                    { stage: "Application Received", date: "2025-01-28", status: "completed" },
                    { stage: "Initial Screening", date: "2025-01-29", status: "completed", interviewer: "HR Team" },
                    { stage: "Technical Round", date: "2025-01-31", status: "completed", interviewer: "Tech Lead", rating: 4.3 },
                    { stage: "Manager Round", date: "2025-02-03", status: "completed", interviewer: "Engineering Manager", rating: 4.5 },
                    { stage: "Final Round (Krishna)", date: "2025-02-08", status: "current", notes: "CTC discussion and cultural fit" }
                ],
                emails: [
                    { type: "Interview Invitation", sentDate: "2025-01-30", status: "opened" },
                    { type: "Final Round Invitation", sentDate: "2025-02-06", status: "opened" }
                ]
            },
            {
                id: 3,
                name: "Priya Sharma",
                email: "priya.s@email.com",
                phone: "+91 98765 43212",
                role: "UI/UX Designer",
                source: "LinkedIn",
                status: "New",
                experience: 3,
                skills: ["Figma", "Adobe XD", "User Research", "Prototyping"],
                rating: null,
                appliedDate: "2025-02-06",
                notes: "Portfolio looks promising",
                timeline: [
                    { stage: "Application Received", date: "2025-02-06", status: "completed" }
                ],
                emails: []
            },
            {
                id: 4,
                name: "Amit Patel",
                email: "amit.p@email.com",
                phone: "+91 98765 43213",
                role: "Senior Developer",
                source: "Referral",
                status: "Selected",
                experience: 6,
                skills: ["Python", "Django", "PostgreSQL", "Redis"],
                rating: 4.7,
                appliedDate: "2025-01-20",
                notes: "Referred by team member, excellent technical skills",
                timeline: [
                    { stage: "Application Received", date: "2025-01-20", status: "completed" },
                    { stage: "Technical Round", date: "2025-01-22", status: "completed", rating: 4.8 },
                    { stage: "Final Round (Rohit)", date: "2025-01-24", status: "completed", rating: 4.7 },
                    { stage: "Offer Extended", date: "2025-01-25", status: "completed" },
                    { stage: "Offer Accepted", date: "2025-01-26", status: "completed" }
                ],
                emails: [
                    { type: "Interview Invitation", sentDate: "2025-01-21", status: "opened" },
                    { type: "Selection & Offer", sentDate: "2025-01-25", status: "replied", subject: "Offer Letter - Senior Developer" }
                ]
            },
            {
                id: 5,
                name: "Neha Gupta",
                email: "neha.g@email.com",
                phone: "+91 98765 43214",
                role: "Project Manager",
                source: "Career Page",
                status: "Screening",
                experience: 8,
                skills: ["Agile", "Scrum", "JIRA", "Team Management"],
                rating: null,
                appliedDate: "2025-02-03",
                notes: "Strong leadership experience",
                timeline: [
                    { stage: "Application Received", date: "2025-02-03", status: "completed" },
                    { stage: "Initial Screening", date: "2025-02-05", status: "current", interviewer: "HR Team" }
                ],
                emails: [
                    { type: "Interview Invitation", sentDate: "2025-02-04", status: "sent" }
                ]
            },
            {
                id: 6,
                name: "Vikram Singh",
                email: "vikram.s@email.com",
                phone: "+91 98765 43215",
                role: "DevOps Engineer",
                source: "LinkedIn",
                status: "Selected",
                experience: 5,
                skills: ["GCP", "Terraform", "Ansible", "CI/CD"],
                rating: 4.6,
                appliedDate: "2025-01-25",
                notes: "Ready to join immediately",
                timeline: [
                    { stage: "Application Received", date: "2025-01-25", status: "completed" },
                    { stage: "Technical Rounds", date: "2025-01-27", status: "completed", rating: 4.6 },
                    { stage: "Final Round (Krishna)", date: "2025-01-29", status: "completed", rating: 4.7 },
                    { stage: "Selected", date: "2025-01-30", status: "completed" }
                ],
                emails: [
                    { type: "Selection & Offer", sentDate: "2025-01-30", status: "replied" }
                ]
            },
            {
                id: 7,
                name: "Anjali Reddy",
                email: "anjali.r@email.com",
                phone: "+91 98765 43216",
                role: "UI/UX Designer",
                source: "Naukri",
                status: "Interview",
                experience: 4,
                skills: ["Sketch", "InVision", "CSS", "HTML"],
                rating: 4.2,
                appliedDate: "2025-01-30",
                notes: "Creative thinking, good attention to detail",
                timeline: [
                    { stage: "Application Received", date: "2025-01-30", status: "completed" },
                    { stage: "Portfolio Review", date: "2025-02-01", status: "completed", rating: 4.0 },
                    { stage: "Design Challenge", date: "2025-02-04", status: "current" }
                ],
                emails: []
            },
            {
                id: 8,
                name: "Karthik Iyer",
                email: "karthik.i@email.com",
                phone: "+91 98765 43217",
                role: "Senior Developer",
                source: "Career Page",
                status: "Selected",
                experience: 7,
                skills: ["Java", "Spring Boot", "Microservices", "Kafka"],
                rating: 4.8,
                appliedDate: "2025-01-18",
                notes: "Exceptional technical knowledge",
                timeline: [
                    { stage: "Application Received", date: "2025-01-18", status: "completed" },
                    { stage: "Technical Rounds", date: "2025-01-20", status: "completed", rating: 4.9 },
                    { stage: "Final Round (Rohit)", date: "2025-01-22", status: "completed", rating: 4.8 },
                    { stage: "Offer Extended", date: "2025-01-23", status: "completed" }
                ],
                emails: [
                    { type: "Selection & Offer", sentDate: "2025-01-23", status: "replied" }
                ]
            }
        ];

        // Bulk upload storage
        let uploadedFiles = [];
        let screeningResults = [];
        let currentViewingCandidate = null;

        // Email Templates
        const emailTemplates = {
            rejection: {
                subject: "Application Status - {{role}} Position at Dutient",
                body: `Dear {{name}},

Thank you for taking the time to apply for the {{role}} position at Dutient and for your interest in joining our team.

After careful consideration of your application and comparing it with our current requirements, we have decided to move forward with other candidates whose qualifications more closely align with our immediate needs for this role.

We truly appreciate the time and effort you invested in the application process. Your skills and experience are impressive, and we encourage you to apply for future openings at Dutient that match your profile.

We will keep your resume on file and may reach out if a suitable opportunity arises in the future.

We wish you the very best in your job search and future career endeavors.

Best regards,
The Dutient Hiring Team`
            },
            selection: {
                subject: "Congratulations! Offer Letter - {{role}} Position at Dutient",
                body: `Dear {{name}},

Congratulations! We are delighted to extend an offer for the position of {{role}} at Dutient.

We were very impressed with your skills, experience, and the enthusiasm you demonstrated throughout the interview process. We believe you will be a valuable addition to our team.

**Offer Details:**
- Position: {{role}}
- CTC: ‚Çπ{{ctc}} per annum
- Start Date: {{startDate}}
- Reporting To: {{reportingManager}}

Please find the detailed offer letter attached to this email. We request you to review the terms and conditions and confirm your acceptance by {{acceptanceDeadline}}.

If you have any questions or need clarification on any aspect of the offer, please don't hesitate to reach out.

We're excited about the possibility of you joining the Dutient team and look forward to your positive response.

Best regards,
{{senderName}}
Dutient`
            },
            'interview-invite': {
                subject: "Interview Invitation - {{role}} Position at Dutient",
                body: `Dear {{name}},

Thank you for your interest in the {{role}} position at Dutient. We were impressed with your profile and would like to invite you for an interview.

**Interview Details:**
- Round: {{round}}
- Date: {{date}}
- Time: {{time}}
- Duration: {{duration}}
- Mode: {{mode}}
- Interviewer(s): {{interviewers}}

{{#if meetingLink}}
Meeting Link: {{meetingLink}}
{{/if}}

{{#if location}}
Location: {{location}}
{{/if}}

Please confirm your availability for the scheduled interview. If you need to reschedule, please let us know at least 24 hours in advance.

We look forward to speaking with you!

Best regards,
The Dutient Hiring Team`
            },
            'status-update': {
                subject: "Application Status Update - {{role}} Position",
                body: `Dear {{name}},

We wanted to provide you with an update on your application for the {{role}} position at Dutient.

{{statusMessage}}

We appreciate your patience throughout this process and will keep you informed of any developments.

If you have any questions, please feel free to reach out to us.

Best regards,
The Dutient Hiring Team`
            },
            'final-round': {
                subject: "Final Round Interview - {{role}} Position at Dutient",
                body: `Dear {{name}},

Congratulations on successfully completing the previous interview rounds! We would like to invite you for the final round of interview for the {{role}} position.

**Final Round Details:**
- Date: {{date}}
- Time: {{time}}
- Duration: Approximately 45-60 minutes
- Interviewer: Krishna/Rohit (Co-founders)
- Mode: {{mode}}

This round will focus on:
- Role clarity and expectations
- Compensation discussion and CTC negotiation
- Cultural fit and company values alignment
- Long-term career goals

Please come prepared with any questions you may have about the role, team, or company.

Looking forward to our conversation!

Best regards,
The Dutient Hiring Team`
            }
        };

        // Navigation
        function navigateTo(page) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            
            document.getElementById(page).classList.add('active');
            document.querySelector(`[data-page="${page}"]`).classList.add('active');
            
            // Load page-specific content
            if (page === 'candidates') loadCandidates();
            if (page === 'talent-pool') loadTalentPool();
            if (page === 'interviews') loadInterviews();
            if (page === 'templates') loadTemplate();
        }

        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                navigateTo(link.dataset.page);
            });
        });

        // Modal Functions
        function showModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Close modal on outside click
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal(modal.id);
                }
            });
        });

        // Tab Functions
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        // Load Candidates
        function loadCandidates(filter = {}) {
            const container = document.getElementById('candidatesList');
            let filteredCandidates = candidates;

            // Apply filters
            if (filter.status) {
                filteredCandidates = filteredCandidates.filter(c => c.status === filter.status);
            }
            if (filter.source) {
                filteredCandidates = filteredCandidates.filter(c => c.source === filter.source);
            }
            if (filter.role) {
                filteredCandidates = filteredCandidates.filter(c => c.role.includes(filter.role));
            }
            if (filter.search) {
                const searchTerm = filter.search.toLowerCase();
                filteredCandidates = filteredCandidates.filter(c => 
                    c.name.toLowerCase().includes(searchTerm) ||
                    c.role.toLowerCase().includes(searchTerm) ||
                    c.skills.some(s => s.toLowerCase().includes(searchTerm))
                );
            }

            container.innerHTML = filteredCandidates.map(candidate => `
                <div class="candidate-card" onclick="viewCandidate(${candidate.id})">
                    <div class="candidate-header">
                        <div>
                            <div class="candidate-name">${candidate.name}</div>
                            <div class="candidate-role">${candidate.role}</div>
                        </div>
                        <div>
                            <span class="badge badge-${candidate.status.toLowerCase().replace(' ', '-')}">${candidate.status}</span>
                        </div>
                    </div>
                    <div class="candidate-meta">
                        <span class="candidate-meta-item">üìß ${candidate.email}</span>
                        <span class="candidate-meta-item">üìû ${candidate.phone}</span>
                        <span class="candidate-meta-item">üíº ${candidate.experience} years</span>
                        <span class="badge badge-${candidate.source.toLowerCase().replace(' ', '-')}">${candidate.source}</span>
                    </div>
                    <div class="candidate-meta mt-1">
                        <span class="candidate-meta-item"><strong>Skills:</strong> ${candidate.skills.join(', ')}</span>
                    </div>
                    ${candidate.rating ? `
                        <div class="mt-1">
                            <div class="rating">
                                ${[1,2,3,4,5].map(i => `<span class="star ${i <= candidate.rating ? 'filled' : ''}">‚òÖ</span>`).join('')}
                                <span style="margin-left: 0.5rem; color: var(--text-muted);">${candidate.rating}/5</span>
                            </div>
                        </div>
                    ` : ''}
                    <div class="action-buttons mt-2">
                        <button class="btn btn-sm btn-secondary" onclick="event.stopPropagation(); showModal('feedbackModal')">Add Feedback</button>
                        <button class="btn btn-sm btn-primary" onclick="event.stopPropagation(); updateStatus(${candidate.id})">Update Status</button>
                    </div>
                </div>
            `).join('');
        }

        // Load Talent Pool
        function loadTalentPool() {
            const selectedCandidates = candidates.filter(c => c.status === 'Selected');
            const container = document.getElementById('talentPoolList');
            
            container.innerHTML = selectedCandidates.map(candidate => `
                <div class="candidate-card">
                    <div class="candidate-header">
                        <div>
                            <div class="candidate-name">${candidate.name}</div>
                            <div class="candidate-role">${candidate.role}</div>
                        </div>
                        <div>
                            <span class="badge badge-ready">Ready to Deploy</span>
                        </div>
                    </div>
                    <div class="candidate-meta">
                        <span class="candidate-meta-item">üìß ${candidate.email}</span>
                        <span class="candidate-meta-item">üìû ${candidate.phone}</span>
                        <span class="candidate-meta-item">üíº ${candidate.experience} years</span>
                    </div>
                    <div class="candidate-meta mt-1">
                        <span class="candidate-meta-item"><strong>Skills:</strong> ${candidate.skills.join(', ')}</span>
                    </div>
                    <div class="mt-1">
                        <div class="rating">
                            ${[1,2,3,4,5].map(i => `<span class="star ${i <= candidate.rating ? 'filled' : ''}">‚òÖ</span>`).join('')}
                            <span style="margin-left: 0.5rem; color: var(--text-muted);">${candidate.rating}/5</span>
                        </div>
                    </div>
                    <div class="action-buttons mt-2">
                        <button class="btn btn-sm btn-primary" onclick="deployCandidate(${candidate.id})">Deploy to Project</button>
                        <button class="btn btn-sm btn-secondary" onclick="viewCandidate(${candidate.id})">View Details</button>
                    </div>
                </div>
            `).join('');
        }

        // Filter Functions
        function filterCandidates(status) {
            if (status) {
                document.getElementById('statusFilter').value = status;
            }
            
            const filters = {
                status: document.getElementById('statusFilter')?.value || '',
                source: document.getElementById('sourceFilter')?.value || '',
                role: document.getElementById('roleFilter')?.value || '',
                search: document.getElementById('candidateSearch')?.value || ''
            };
            
            loadCandidates(filters);
            navigateTo('candidates');
        }

        function searchCandidates() {
            filterCandidates();
        }

        // Template Functions
        function loadTemplate() {
            const templateType = document.getElementById('templateType').value;
            const template = emailTemplates[templateType];
            const preview = document.getElementById('templatePreview');
            
            preview.innerHTML = `
                <div class="email-preview-header">Subject: ${template.subject}</div>
                <div style="white-space: pre-wrap; line-height: 1.8;">${template.body}</div>
                <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border); color: var(--text-muted); font-size: 0.85rem;">
                    <strong>Template Variables:</strong> {{name}}, {{role}}, {{date}}, {{time}}, etc.
                </div>
            `;
        }

        function editTemplate() {
            alert('Template editor would open here. In production, this would allow you to customize the template.');
        }

        function useTemplate() {
            alert('This would allow you to use the template with a selected candidate, filling in the variables.');
        }

        // View Candidate
        function viewCandidate(id) {
            const candidate = candidates.find(c => c.id === id);
            if (!candidate) return;
            
            currentViewingCandidate = id;
            document.getElementById('viewCandidateName').textContent = candidate.name;
            document.getElementById('emailTo').value = candidate.email;
            
            // Load profile tab
            document.getElementById('candidateDetailsContent').innerHTML = `
                <div class="form-group">
                    <label>Role</label>
                    <input type="text" value="${candidate.role}" readonly>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="text" value="${candidate.email}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="text" value="${candidate.phone}" readonly>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Source</label>
                        <input type="text" value="${candidate.source}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <input type="text" value="${candidate.status}" readonly>
                    </div>
                </div>
                <div class="form-group">
                    <label>Experience</label>
                    <input type="text" value="${candidate.experience} years" readonly>
                </div>
                <div class="form-group">
                    <label>Skills</label>
                    <div style="margin-top: 0.5rem;">
                        ${candidate.skills.map(skill => `<span class="badge" style="margin-right: 0.5rem; margin-bottom: 0.5rem;">${skill}</span>`).join('')}
                    </div>
                </div>
                ${candidate.rating ? `
                    <div class="form-group">
                        <label>Overall Rating</label>
                        <div class="rating" style="margin-top: 0.5rem;">
                            ${[1,2,3,4,5].map(i => `<span class="star ${i <= candidate.rating ? 'filled' : ''}">‚òÖ</span>`).join('')}
                            <span style="margin-left: 0.5rem;">${candidate.rating}/5</span>
                        </div>
                    </div>
                ` : ''}
                <div class="form-group">
                    <label>Notes</label>
                    <textarea readonly>${candidate.notes}</textarea>
                </div>
                <div class="form-group">
                    <label>Applied Date</label>
                    <input type="text" value="${new Date(candidate.appliedDate).toLocaleDateString()}" readonly>
                </div>
                <div class="action-buttons mt-2">
                    <button class="btn btn-secondary" onclick="closeModal('viewCandidateModal')">Close</button>
                    <button class="btn btn-primary" onclick="editCandidate(${candidate.id})">Edit</button>
                </div>
            `;
            
            showModal('viewCandidateModal');
        }

        // Form Submissions
        function addCandidate(event) {
            event.preventDefault();
            alert('Candidate added successfully! In production, this would save to the database.');
            closeModal('addCandidateModal');
            event.target.reset();
        }

        function submitFeedback(event) {
            event.preventDefault();
            alert('Interview feedback submitted successfully!');
            closeModal('feedbackModal');
            event.target.reset();
        }

        function updateStatus(id) {
            alert(`Update status for candidate ID: ${id}. In production, this would show a status update form.`);
        }

        function deployCandidate(id) {
            const candidate = candidates.find(c => c.id === id);
            alert(`Deploy ${candidate.name} to a project. In production, this would show project assignment options.`);
        }

        function editCandidate(id) {
            alert(`Edit candidate ID: ${id}. In production, this would show an edit form.`);
        }

        function loadInterviews() {
            // Sample interviews data
            const scheduledContainer = document.getElementById('scheduledInterviews');
            scheduledContainer.innerHTML = `
                <div class="candidate-card">
                    <div class="candidate-header">
                        <div>
                            <div class="candidate-name">Sarah Johnson - Technical Round 2</div>
                            <div class="candidate-role">Senior Developer</div>
                        </div>
                        <div>
                            <span class="badge badge-interview">Today, 2:00 PM</span>
                        </div>
                    </div>
                    <div class="candidate-meta">
                        <span class="candidate-meta-item">üë§ Interviewer: Rahul Mehta</span>
                        <span class="candidate-meta-item">üïê Duration: 60 min</span>
                        <span class="candidate-meta-item">üíª Mode: Video Call</span>
                    </div>
                    <div class="action-buttons mt-2">
                        <button class="btn btn-sm btn-primary">Join Meeting</button>
                        <button class="btn btn-sm btn-secondary">Reschedule</button>
                    </div>
                </div>
            `;

            const pendingContainer = document.getElementById('pendingFeedbackList');
            pendingContainer.innerHTML = `
                <div class="candidate-card">
                    <div class="candidate-header">
                        <div>
                            <div class="candidate-name">Raj Kumar - Manager Round</div>
                            <div class="candidate-role">DevOps Engineer</div>
                        </div>
                        <div>
                            <span class="badge badge-warning">Feedback Pending</span>
                        </div>
                    </div>
                    <div class="candidate-meta">
                        <span class="candidate-meta-item">üë§ Interviewer: Priya Joshi</span>
                        <span class="candidate-meta-item">üìÖ Completed: 2 hours ago</span>
                    </div>
                    <div class="action-buttons mt-2">
                        <button class="btn btn-sm btn-primary" onclick="showModal('feedbackModal')">Add Feedback</button>
                    </div>
                </div>
            `;
        }

        // Bulk Upload Functions
        function handleBulkUpload(event) {
            const files = event.target.files;
            if (files.length === 0) return;

            uploadedFiles = Array.from(files);
            displayUploadedFiles();
            document.getElementById('uploadedFilesList').style.display = 'block';
            document.getElementById('screeningOptionsCard').style.display = 'block';
            document.getElementById('startScreeningBtn').style.display = 'inline-flex';
        }

        function displayUploadedFiles() {
            const container = document.getElementById('fileItems');
            document.getElementById('fileCount').textContent = uploadedFiles.length;
            
            container.innerHTML = uploadedFiles.map((file, index) => `
                <div class="file-item">
                    <div class="file-info">
                        <div class="file-icon">${file.name.endsWith('.pdf') ? 'üìÑ' : 'üìù'}</div>
                        <div class="file-details">
                            <div class="file-name">${file.name}</div>
                            <div class="file-meta">${(file.size / 1024).toFixed(2)} KB</div>
                            <div class="progress-bar" id="progress-${index}">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="file-status" id="status-${index}">
                        <span class="badge badge-new">Ready</span>
                    </div>
                    <div class="file-actions">
                        <button class="btn btn-sm btn-danger" onclick="removeFile(${index})">Remove</button>
                    </div>
                </div>
            `).join('');
        }

        function removeFile(index) {
            uploadedFiles.splice(index, 1);
            displayUploadedFiles();
            if (uploadedFiles.length === 0) {
                document.getElementById('uploadedFilesList').style.display = 'none';
                document.getElementById('screeningOptionsCard').style.display = 'none';
                document.getElementById('startScreeningBtn').style.display = 'none';
            }
        }

        function startBulkScreening() {
            document.getElementById('screeningResultsCard').style.display = 'block';
            
            // Simulate AI screening process
            screeningResults = [];
            uploadedFiles.forEach((file, index) => {
                // Simulate progress
                setTimeout(() => {
                    const progressBar = document.getElementById(`progress-${index}`);
                    const statusBadge = document.getElementById(`status-${index}`);
                    
                    let progress = 0;
                    const interval = setInterval(() => {
                        progress += 10;
                        if (progressBar) {
                            progressBar.querySelector('.progress-fill').style.width = progress + '%';
                        }
                        
                        if (progress >= 100) {
                            clearInterval(interval);
                            if (statusBadge) {
                                statusBadge.innerHTML = '<span class="badge badge-success">Screened</span>';
                            }
                            
                            // Generate screening result
                            const result = generateScreeningResult(file.name, index);
                            screeningResults.push(result);
                            displayScreeningResults();
                        }
                    }, 100);
                }, index * 200);
            });
        }

        function generateScreeningResult(fileName, index) {
            const sampleCandidates = [
                { name: "Rohit Sharma", email: "rohit.s@email.com", role: "Senior Developer", exp: 6, skills: ["React", "Node.js", "TypeScript", "AWS"], score: 92 },
                { name: "Sneha Patel", email: "sneha.p@email.com", role: "UI/UX Designer", exp: 4, skills: ["Figma", "Adobe XD", "Sketch", "CSS"], score: 88 },
                { name: "Arjun Kumar", email: "arjun.k@email.com", role: "DevOps Engineer", exp: 5, skills: ["Kubernetes", "Docker", "Jenkins", "AWS"], score: 85 },
                { name: "Kavya Menon", email: "kavya.m@email.com", role: "Full Stack Developer", exp: 3, skills: ["Python", "Django", "React", "PostgreSQL"], score: 78 },
                { name: "Aditya Verma", email: "aditya.v@email.com", role: "Backend Developer", exp: 4, skills: ["Java", "Spring Boot", "MySQL", "Redis"], score: 82 }
            ];
            
            const candidate = sampleCandidates[index % sampleCandidates.length];
            return {
                ...candidate,
                fileName: fileName,
                recommendation: candidate.score >= 85 ? 'Shortlist' : candidate.score >= 70 ? 'Maybe' : 'Reject',
                matchedSkills: candidate.skills.slice(0, 3)
            };
        }

        function displayScreeningResults() {
            const container = document.getElementById('screeningResults');
            const sortedResults = screeningResults.sort((a, b) => b.score - a.score);
            
            container.innerHTML = sortedResults.map(result => `
                <div class="screening-card">
                    <div class="screening-header">
                        <div>
                            <div class="screening-name">${result.name}</div>
                            <div class="candidate-role">${result.role} ‚Ä¢ ${result.exp} years experience</div>
                        </div>
                        <div>
                            <div class="match-score ${result.score >= 85 ? 'high' : result.score >= 70 ? 'medium' : 'low'}">
                                üéØ ${result.score}% Match
                            </div>
                        </div>
                    </div>
                    <div class="candidate-meta">
                        <span class="candidate-meta-item">üìß ${result.email}</span>
                        <span class="candidate-meta-item">üìÑ ${result.fileName}</span>
                    </div>
                    <div class="screening-skills">
                        <strong>Skills:</strong>
                        ${result.skills.map(skill => 
                            `<span class="skill-tag ${result.matchedSkills.includes(skill) ? 'matched' : ''}">${skill}</span>`
                        ).join('')}
                    </div>
                    <div class="action-buttons mt-2">
                        ${result.recommendation === 'Shortlist' ? 
                            '<button class="btn btn-sm btn-success" onclick="approveCandidate(\'' + result.name + '\')">‚úì Shortlist</button>' :
                            result.recommendation === 'Maybe' ?
                            '<button class="btn btn-sm btn-secondary" onclick="reviewCandidate(\'' + result.name + '\')">Review</button>' :
                            '<button class="btn btn-sm btn-danger" onclick="rejectCandidate(\'' + result.name + '\')">Reject</button>'
                        }
                        <button class="btn btn-sm btn-secondary" onclick="viewResume(\'' + result.fileName + '\')">View Resume</button>
                        <button class="btn btn-sm btn-primary" onclick="addToSystem('${result.name}', '${result.email}', '${result.role}')">Add to System</button>
                    </div>
                </div>
            `).join('');
        }

        function approveAllShortlisted() {
            const shortlisted = screeningResults.filter(r => r.recommendation === 'Shortlist');
            alert(`Adding ${shortlisted.length} shortlisted candidates to the system!`);
        }

        function exportScreeningResults() {
            alert('Screening results exported as CSV with all candidate details and AI scores.');
        }

        function approveCandidate(name) {
            alert(`${name} approved and added to candidate pipeline!`);
        }

        function reviewCandidate(name) {
            alert(`${name} marked for manual review.`);
        }

        function rejectCandidate(name) {
            alert(`${name} rejected. Rejection email will be sent.`);
        }

        function viewResume(fileName) {
            alert(`Opening resume: ${fileName}`);
        }

        function addToSystem(name, email, role) {
            alert(`${name} (${email}) added as ${role} to the candidate management system!`);
        }

        // AI Search Functions
        function performAISearch() {
            const searchQuery = document.getElementById('aiSearchInput').value;
            if (!searchQuery.trim()) {
                alert('Please enter a search query');
                return;
            }

            const results = candidates.map(candidate => {
                const query = searchQuery.toLowerCase();
                let score = 0;
                
                if (candidate.name.toLowerCase().includes(query)) score += 20;
                if (candidate.role.toLowerCase().includes(query)) score += 30;
                candidate.skills.forEach(skill => {
                    if (query.includes(skill.toLowerCase())) score += 15;
                });
                if (query.includes(candidate.experience.toString())) score += 10;
                
                return { ...candidate, matchScore: Math.min(score, 95) };
            }).filter(c => c.matchScore > 0).sort((a, b) => b.matchScore - a.matchScore);

            displayAISearchResults(results, searchQuery);
        }

        function displayAISearchResults(results, query) {
            const container = document.getElementById('candidatesList');
            
            if (results.length === 0) {
                container.innerHTML = `
                    <div class="card" style="text-align: center; padding: 3rem;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üîç</div>
                        <h3>No matches found</h3>
                        <p style="color: var(--text-muted); margin-top: 0.5rem;">Try adjusting your search query: "${query}"</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = `
                <div class="card mb-2" style="background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%); color: white;">
                    <strong>üéØ AI Search Results:</strong> Found ${results.length} candidates matching "${query}"
                </div>
            ` + results.map(candidate => `
                <div class="candidate-card" onclick="viewCandidate(${candidate.id})">
                    <div class="candidate-header">
                        <div>
                            <div class="candidate-name">${candidate.name}</div>
                            <div class="candidate-role">${candidate.role}</div>
                        </div>
                        <div style="display: flex; gap: 0.5rem; align-items: center;">
                            <div class="match-score ${candidate.matchScore >= 70 ? 'high' : candidate.matchScore >= 50 ? 'medium' : 'low'}">
                                ${candidate.matchScore}% Match
                            </div>
                            <span class="badge badge-${candidate.status.toLowerCase().replace(' ', '-')}">${candidate.status}</span>
                        </div>
                    </div>
                    <div class="candidate-meta">
                        <span class="candidate-meta-item">üìß ${candidate.email}</span>
                        <span class="candidate-meta-item">üìû ${candidate.phone}</span>
                        <span class="candidate-meta-item">üíº ${candidate.experience} years</span>
                    </div>
                    <div class="candidate-meta mt-1">
                        <span class="candidate-meta-item"><strong>Skills:</strong> ${candidate.skills.join(', ')}</span>
                    </div>
                    ${candidate.rating ? `
                        <div class="mt-1">
                            <div class="rating">
                                ${[1,2,3,4,5].map(i => `<span class="star ${i <= candidate.rating ? 'filled' : ''}">‚òÖ</span>`).join('')}
                                <span style="margin-left: 0.5rem; color: var(--text-muted);">${candidate.rating}/5</span>
                            </div>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        function handleJDUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            document.getElementById('jdUploadZone').style.display = 'none';
            document.getElementById('jdUploadedInfo').style.display = 'flex';
            document.getElementById('jdFileName').textContent = file.name;

            setTimeout(() => {
                alert(`JD "${file.name}" analyzed! Now showing candidates matched to this job description.`);
                performAISearch();
            }, 1000);
        }

        function clearJD() {
            document.getElementById('jdUploadZone').style.display = 'block';
            document.getElementById('jdUploadedInfo').style.display = 'none';
            document.getElementById('jdFileInput').value = '';
            loadCandidates();
        }

        // Candidate Tab Switching
        function switchCandidateTab(tabName) {
            document.querySelectorAll('#viewCandidateModal .tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('#viewCandidateModal .tab-content').forEach(tc => tc.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(`candidate-${tabName}-tab`).classList.add('active');

            if (tabName === 'timeline' && currentViewingCandidate) {
                loadCandidateTimeline(currentViewingCandidate);
            } else if (tabName === 'emails' && currentViewingCandidate) {
                loadCandidateEmails(currentViewingCandidate);
            }
        }

        function loadCandidateTimeline(candidateId) {
            const candidate = candidates.find(c => c.id === candidateId);
            if (!candidate || !candidate.timeline) return;

            const container = document.getElementById('candidateTimelineContent');
            container.innerHTML = candidate.timeline.map(item => `
                <div class="timeline-item ${item.status}">
                    <div class="timeline-content">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                            <strong>${item.stage}</strong>
                            <span style="font-size: 0.85rem; color: var(--text-muted);">${new Date(item.date).toLocaleDateString()}</span>
                        </div>
                        ${item.interviewer ? `<div style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 0.5rem;">üë§ Interviewer: ${item.interviewer}</div>` : ''}
                        ${item.rating ? `
                            <div class="rating" style="margin-bottom: 0.5rem;">
                                ${[1,2,3,4,5].map(i => `<span class="star ${i <= item.rating ? 'filled' : ''}">‚òÖ</span>`).join('')}
                                <span style="margin-left: 0.5rem;">${item.rating}/5</span>
                            </div>
                        ` : ''}
                        ${item.notes ? `<div style="font-size: 0.9rem; margin-top: 0.5rem;">${item.notes}</div>` : ''}
                        ${item.meetLink ? `
                            <div style="margin-top: 0.75rem;">
                                <button class="meet-button btn-sm" onclick="window.open('${item.meetLink}', '_blank')">View Meet Link</button>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `).join('');
        }

        function loadCandidateEmails(candidateId) {
            const candidate = candidates.find(c => c.id === candidateId);
            if (!candidate || !candidate.emails) return;

            const container = document.getElementById('candidateEmailsContent');
            
            if (candidate.emails.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: var(--text-muted);">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üì≠</div>
                        <p>No emails sent yet</p>
                        <button class="btn btn-primary mt-2" onclick="prepareEmail(${candidateId})">Send First Email</button>
                    </div>
                `;
                return;
            }

            container.innerHTML = candidate.emails.map(email => `
                <div class="email-log">
                    <div class="email-log-header">
                        <div>
                            <div class="email-type">${email.type}</div>
                            ${email.subject ? `<div style="font-size: 0.9rem; color: var(--text-muted); margin-top: 0.25rem;">${email.subject}</div>` : ''}
                        </div>
                        <span class="email-status ${email.status}">${email.status.toUpperCase()}</span>
                    </div>
                    <div class="candidate-meta">
                        <span class="candidate-meta-item">üì§ Sent: ${new Date(email.sentDate).toLocaleDateString()}</span>
                        ${email.openedDate ? `<span class="candidate-meta-item">üëÅÔ∏è Opened: ${new Date(email.openedDate).toLocaleDateString()}</span>` : ''}
                        ${email.repliedDate ? `<span class="candidate-meta-item">‚Ü©Ô∏è Replied: ${new Date(email.repliedDate).toLocaleDateString()}</span>` : ''}
                    </div>
                </div>
            `).join('');
        }

        // Email Functions
        function prepareEmail(candidateId) {
            currentViewingCandidate = candidateId;
            const candidate = candidates.find(c => c.id === candidateId);
            if (candidate) {
                document.getElementById('emailTo').value = candidate.email;
            }
            showModal('sendEmailModal');
        }

        function sendCandidateEmail(event) {
            event.preventDefault();
            
            const emailData = {
                type: document.getElementById('emailType').value,
                to: document.getElementById('emailTo').value,
                subject: document.getElementById('emailSubject').value,
                body: document.getElementById('emailBody').value,
                meetLink: document.getElementById('meetLink')?.value
            };

            if (currentViewingCandidate) {
                const candidate = candidates.find(c => c.id === currentViewingCandidate);
                if (candidate) {
                    if (!candidate.emails) candidate.emails = [];
                    candidate.emails.push({
                        type: emailData.type.split('-').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' '),
                        subject: emailData.subject,
                        sentDate: new Date().toISOString().split('T')[0],
                        status: 'sent'
                    });
                }
            }

            alert('‚úÖ Email sent successfully! The system will track opens and responses.');
            closeModal('sendEmailModal');
            event.target.reset();
            
            if (document.getElementById('candidate-emails-tab').classList.contains('active')) {
                loadCandidateEmails(currentViewingCandidate);
            }
        }

        function loadEmailTemplate() {
            const type = document.getElementById('emailType').value;
            const template = emailTemplates[type];
            
            if (template) {
                document.getElementById('emailSubject').value = template.subject;
                document.getElementById('emailBody').value = template.body;
            }

            if (type === 'interview-invite' || type === 'final-round') {
                document.getElementById('meetLinkGroup').style.display = 'block';
            } else {
                document.getElementById('meetLinkGroup').style.display = 'none';
            }
        }

        function generateMeetLink() {
            const randomId = Math.random().toString(36).substring(2, 15);
            const meetLink = `https://meet.google.com/${randomId.slice(0,3)}-${randomId.slice(3,7)}-${randomId.slice(7,10)}`;
            document.getElementById('meetLink').value = meetLink;
            alert('üìπ Google Meet link generated! In production, this integrates with Google Calendar API.');
        }

        // Drag and Drop
        document.addEventListener('DOMContentLoaded', () => {
            const uploadZone = document.getElementById('uploadZone');
            if (uploadZone) {
                uploadZone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadZone.classList.add('dragover');
                });

                uploadZone.addEventListener('dragleave', () => {
                    uploadZone.classList.remove('dragover');
                });

                uploadZone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    uploadZone.classList.remove('dragover');
                    const files = e.dataTransfer.files;
                    document.getElementById('bulkResumeInput').files = files;
                    handleBulkUpload({ target: { files } });
                });
            }
        });

        // Initialize
        loadCandidates();
    </script>
</body>
</html>
